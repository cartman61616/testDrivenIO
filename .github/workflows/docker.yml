name: Docker Compose Actions Workflow
on: push
jobs:
  build:
    env: 
      REACT_APP_USERS_SERVICE_URL: http://127.0.0.1
    runs-on: ubuntu-latest
    steps: 
    - uses: actions/checkout@master
    - name: Build the stack
      run: docker-compose up -d
    - name: Create DB
      run: docker-compose exec users python recreate_db
    - name: Seed DB
      run: docker-compose exec users python manage.py seed_db
    - name: Run Python Tests
      run: docker-compose exec users python manage.py test
    - name: Run Python Lint Test
      run: docker-compose exec users flake8 project
